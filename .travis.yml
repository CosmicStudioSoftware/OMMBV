language: python
dist: xenial
matrix:
  include:
    - python: 2.7
    - python: 3.6
    - python: 3.7
    - python: 3.8

addons:
  apt:
    packages:
    - gfortran

before_install:
  - pip install pytest-cov
  - pip install coveralls
  - pip install future
  # Install version specific packages for 2.7 and 3.5
  - pip install 'pandas<0.25'
  - pip install xarray
  - pip install matplotlib
  - pip install apexpy
  - pip install numpy
  - pip install pysatCDF >/dev/null
  - cd ..
  - git clone https://github.com/pysat/pysat.git >/dev/null
  - cd ./pysat
  - python setup.py install >/dev/null
  - cd ..
  # set up data directory
  - mkdir /home/travis/build/pysatData
  - python -c 'import pysat; pysat.utils.set_data_dir("/home/travis/build/pysatData")'

install:
  # install pysatMagVect
  - cd ./pysatMagVect
  - python setup.py develop

# command to run tests
script:
  - nosetests  -vs --with-coverage --cover-package=pysatMagVect

after_success:
  - coveralls
